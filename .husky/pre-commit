#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ã‚³ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œä¸­..."
# clientãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®lint-stagedã‚’å®Ÿè¡Œ
cd client && npx lint-staged
cd ..

echo "ğŸ” ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ã‚³ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œä¸­..."
# backendãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®lint-stagedã‚’å®Ÿè¡Œï¼ˆDockerå†…ã§å®Ÿè¡Œï¼‰
cd backend
if docker compose ps | grep -q "app.*running"; then
  docker compose exec -T app black . --check
  docker compose exec -T app flake8 .
else
  echo "âš ï¸ ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®Dockerã‚³ãƒ³ãƒ†ãƒŠãŒå®Ÿè¡Œã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™ã€‚"
fi 
